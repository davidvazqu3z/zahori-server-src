<h5 class="drawer-heading" *ngIf="configuration.configurationId == 0">Crear configuración</h5>
<h5 class="drawer-heading" *ngIf="configuration.configurationId > 0">Editar configuración</h5>

<div class=" drawer-section">
    <form class="mt-4">

      <div class="col-6 position-relative form-group">
        <label for="name" class="">Nombre</label>
        <input name="name" placeholder="" type="text" class="form-control"
        [(ngModel)]="configuration.name">
      </div>

      <!-- TODO: no tiene sentido poder cambiar el tipo de proceso según distintas configuraciones, el tipo de proceso seguirá siendo el mismo ¿?
      <div class="col-6  position-relative form-group">
        <label for="ProcessType" class="">Tipo de Proceso</label>
        <select name="processType" id="ProcessType" class="form-control">
          <option selected>SQA</option>
        </select>
      </div>
      -->

      <div class="d-flex  position-relative form-group">
        <div class="col-6">
          <label for="environmentId" class="">Entornos</label>
          <select [(ngModel)]="configuration.clientEnvironment.environmentId" name="environmentId" class="form-control">
            <option [value]="env.environmentId" *ngFor="let env of envs">{{env.name}}</option>
          </select>
        </div>
        
        <div class="col-6">
          <label for="retryId" class="">Reintentos</label>
          <select [(ngModel)]="configuration.retry.retryId" name="retryId" class="form-control">
            <option [value]="retry.retryId" *ngFor="let retry of retries">{{retry.retryId}}</option>
          </select> 
        </div>
      </div>

      <!--
      <div class="d-flex  position-relative form-group">
        <div class="col-6">
          <label for="timeout" class="">Timeout</label>
          <select [(ngModel)]="configuration.timeout.timeoutId" name="timeout" class="form-control">
            <option [value] = "timeout.timeoutId" *ngFor = "let timeout of timeouts">{{timeout.timeoutId}}</option>
          </select> 
        </div>

        <div class="col-6">
        </div>
      </div>
      -->

      <div class="d-flex  position-relative form-group">
        <div class="col-6">
          <label for="generateEvidence">Generar Evidencias</label>
          <select name="generateEvidence" class="form-control" [(ngModel)]="configuration.evidenceCase.eviCaseId">
            <option [value]="eviCase.eviCaseId" *ngFor="let eviCase of evidenceCases">{{eviCase.name}}</option>
          </select>
        </div>

        <div class="col-6">
          <div class="ml-2 custom-control custom-switch">
            <input [(ngModel)]="configuration.uploadResults" name="uploadResults" id="uploadResults" type="checkbox" class="custom-control-input">
            <label for="uploadResults" class="custom-control-label" style="margin-bottom: .5rem;">Guardar resultados en repositorio</label>
          </div>
          <select [(ngModel)]="configuration.testRepositories[0].testRepoId" [disabled]="!configuration.uploadResults" name="testRepoId" class="form-control">
            <option [value]="testRepo.testRepoId" *ngFor="let testRepo of testRepositories">{{testRepo.name}}</option>
          </select>
        </div>
      </div>

      <div class="col-12 mt-3 position-relative form-group">
        <div class="col-2 custom-checkbox custom-control custom-control-inline" *ngFor="let evidenceType of evidenceTypes; let i = index">
            <input type="checkbox" (change)="changeEvidenceType(evidenceType, $event)" [checked]="isSelectedEvidenceType(evidenceType)" class="custom-control-input" name="evidenceType_{{evidenceType.eviTypeId}}" id="evidenceType_{{evidenceType.eviTypeId}}">
            <label class="custom-control-label" for="evidenceType_{{evidenceType.eviTypeId}}">{{evidenceType.name}}</label>
        </div>
      </div>
      
      <div class="text-center">
        <button class="btn-wide mt-3 mb-3 btn-icon btn btn-zahoriV btn-sm" (click)="saveConf(configuration)">Guardar</button>
      </div>

    </form>

  </div>
